(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29d116de"],{"07c0":function(t,e,a){},a5b6:function(t,e,a){"use strict";var s=a("07c0"),i=a.n(s);i.a},f95f:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"result"},[a("Dashboard",{attrs:{trend:t.trendData}}),a("el-card",{attrs:{shadow:"never"}},[a("el-form",{staticClass:"filter-panel"},[a("el-row",{attrs:{type:t.mobileClient?"":"flex"}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:6,xl:6}},[a("el-form-item",{attrs:{label:"标签"}},[a("el-select",{attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择关键字"},on:{change:t.handleFilter,focus:function(e){return t.fetchStatisticsData("tag")}},model:{value:t.filters.tag,callback:function(e){t.$set(t.filters,"tag",e)},expression:"filters.tag"}},t._l(t.statistics.tag,function(e){return a("el-option",{key:e._id,attrs:{value:e._id}},[t._v("\n                                "+t._s(e._id)+" "),a("span",{staticClass:"tag-count"},[t._v(t._s(e.value))])])}),1)],1)],1),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:6,xl:6}},[a("el-form-item",{attrs:{label:"语言"}},[a("el-select",{attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择语言"},on:{change:t.handleFilter,focus:function(e){return t.fetchStatisticsData("language")}},model:{value:t.filters.language,callback:function(e){t.$set(t.filters,"language",e)},expression:"filters.language"}},t._l(t.statistics.language,function(e){return a("el-option",{key:e._id,attrs:{value:e._id}},[t._v("\n                                "+t._s(e._id)+" "),a("span",{staticClass:"tag-count"},[t._v(t._s(e.value))])])}),1)],1)],1),a("el-col",{attrs:{xs:24,sm:24,md:24,lg:8,xl:8}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-radio-group",{attrs:{size:"mini",fill:"#DDDDDD"},on:{change:t.handleStatusFilter},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}},[a("el-radio-button",{attrs:{label:"不限"}},[a("i",{staticClass:"iconfont icon-search"}),t._v("不限\n                            ")]),a("el-radio-button",{attrs:{label:"待审"}},[a("i",{staticClass:"iconfont icon-feedback_fill"}),t._v("待审\n                            ")]),a("el-radio-button",{attrs:{label:"确认"}},[a("i",{staticClass:"iconfont icon-flag_fill"}),t._v("确认\n                            ")]),a("el-radio-button",{attrs:{label:"误报"}},[a("i",{staticClass:"iconfont icon-success_fill"}),t._v("误报\n                            ")])],1)],1)],1)],1)],1),a("ResultsTable",{attrs:{results:t.leakagesData},on:{change:t.handleChange}}),t.leakagesData?a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":t.from,"page-sizes":[10,20,50,100],"page-size":t.limit,layout:"total,prev, pager, next, sizes, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],1)],1)},i=[],n=(a("0857"),function(){return a.e("chunk-3ad7cbfa").then(a.bind(null,"fb05"))}),r=function(){return a.e("chunk-f603ab4a").then(a.bind(null,"4ea0"))},l={data:function(){return{statistics:{tag:[],language:[]},filters:{status:this.$route.query.status||"待审",tag:this.$route.query.tag||"",language:this.$route.query.language||""},trendData:{},leakagesData:[],total:10}},computed:{mobileClient:function(){return document.documentElement.clientWidth<document.documentElement.clientHeight},status:function(){return this.$route.query.status?"不限"===this.$route.query.status?{}:"待审"===this.$route.query.status?{security:0,desc:{$exists:!1}}:"确认"===this.$route.query.status?{security:0,desc:{$exists:!0}}:"误报"===this.$route.query.status?{security:1}:void 0:{security:0,desc:{$exists:!1}}},from:function(){return this.$route.query.page?parseInt(this.$route.query.page,10):1},tag:function(){return this.$route.query.tag?this.$route.query.tag:this.$route.params.tag?this.$route.params.tag:""},language:function(){return this.$route.query.language?this.$route.query.language:null},limit:function(){return this.$route.query.limit?parseInt(this.$route.query.limit,10):10}},methods:{handleStatusFilter:function(t){this.$router.push({name:"index",query:{page:1,limit:10,tag:this.filters.tag,language:this.filters.language,status:t}})},handleFilter:function(){this.$router.push({name:"index",query:{page:1,limit:10,tag:this.filters.tag,language:this.filters.language,status:this.filters.status}})},fetchStatisticsData:function(t){var e=this;this.axios.get(this.api.statistic,{params:{by:t,tag:this.filters.tag}}).then(function(a){e.statistics[t]=a.data.result}).catch(function(t){e.$message.error(t.toString())})},handleSizeChange:function(t){this.$router.push({name:"index",query:{page:1,limit:t,tag:this.tag,language:this.language,status:this.filters.status}})},handleCurrentChange:function(t){this.$router.push({name:"index",query:{page:t,limit:this.limit,tag:this.tag,language:this.language,status:this.filters.status}})},handleChange:function(){this.fetchTrend(),this.fetchLeakagesData()},fetchLeakagesData:function(){var t=this;this.axios.get(this.api.leakage,{params:{status:this.status,tag:this.filters.tag,language:this.language,limit:this.limit,from:this.from}}).then(function(e){t.leakagesData=e.data.result,t.total=e.data.total}).catch(function(e){t.$message.error(e.toString())})},fetchTrend:function(){var t=this;this.axios.get(this.api.trend,{params:{tag:this.tag}}).then(function(e){t.trendData=e.data.result}).catch(function(e){t.$message.error(e.toString())})}},components:{Dashboard:n,ResultsTable:r},mounted:function(){this.fetchTrend(),this.fetchLeakagesData()},watch:{$route:function(t,e){this.filters.tag=t.query.tag||"",this.fetchLeakagesData(),this.fetchTrend()}}},u=l,o=(a("a5b6"),a("17cc")),c=Object(o["a"])(u,s,i,!1,null,"5d72b11d",null);e["default"]=c.exports}}]);