(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ebb8050c"],{"408c3":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.render=t.cancel=void 0;var n=r("f7f7"),o=r("8ce0"),i=r("56f3"),a={},l=function(e){clearTimeout(e),delete a[e]},s=function e(t,r,i,s){l((0,n.getTimerId)(t));var c=(0,o.diffSec)(r,s);t.innerHTML=(0,o.formatDiff)(c,i);var u=setTimeout(function(){e(t,r,i,s)},1e3*(0,o.nextInterval)(c),2147483647);a[u]=0,(0,n.saveTimerId)(t,u)},c=function(e){if(e)l((0,n.getTimerId)(e));else for(var t in a)l(t)};t.cancel=c;var u=function(e,t,r){var o;void 0===e.length&&(e=[e]);for(var a=0;a<e.length;a++){o=e[a];var l=(0,n.getDateAttribute)(o),c=(0,i.getLocale)(t);s(o,l,c,r)}return e};t.render=u},"56f3":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocale=t.register=void 0;var n="second_minute_hour_day_week_month_year".split("_"),o="秒_分钟_小时_天_周_个月_年".split("_"),i=function(e,t){if(0===t)return["刚刚","片刻后"];var r=o[parseInt(t/2)];return["".concat(e," ").concat(r,"前"),"".concat(e," ").concat(r,"后")]},a=function(e,t){if(0===t)return["just now","right now"];var r=n[parseInt(t/2)];return e>1&&(r+="s"),["".concat(e," ").concat(r," ago"),"in ".concat(e," ").concat(r)]},l={en_US:a,zh_CN:i},s=function(e,t){l[e]=t};t.register=s;var c=function(e){return l[e]||a};t.getLocale=c},"5aa0":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"format",{enumerable:!0,get:function(){return n.format}}),Object.defineProperty(t,"render",{enumerable:!0,get:function(){return o.render}}),Object.defineProperty(t,"cancel",{enumerable:!0,get:function(){return o.cancel}}),Object.defineProperty(t,"register",{enumerable:!0,get:function(){return i.register}}),t.version=void 0;var n=r("a51e"),o=r("408c3"),i=r("56f3"),a="4.0.0-beta.2";t.version=a},"8ce0":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nextInterval=t.diffSec=t.formatDiff=t.toDate=t.toInt=void 0;var n=[60,60,24,7,365/7/12,12],o=function(e){return parseInt(e)};t.toInt=o;var i=function(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(o(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(e))};t.toDate=i;var a=function(e,t){for(var r=0,i=e<0?1:0,a=e=Math.abs(e);e>=n[r]&&r<n.length;r++)e/=n[r];return e=o(e),r*=2,e>(0===r?9:1)&&(r+=1),t(e,r,a)[i].replace("%s",e)};t.formatDiff=a;var l=function(e,t){return t=t?i(t):new Date,(t-i(e))/1e3};t.diffSec=l;var s=function(e){for(var t=1,r=0,o=Math.abs(e);e>=n[r]&&r<n.length;r++)e/=n[r],t*=n[r];return o%=t,o=o?t-o:t,Math.ceil(o)};t.nextInterval=s},a51e:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.format=void 0;var n=r("8ce0"),o=r("56f3"),i=function(e,t,r){var i=(0,n.diffSec)(e,r);return(0,n.formatDiff)(i,(0,o.getLocale)(t))};t.format=i},f2b9:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"setting-card"},[r("el-dialog",{attrs:{title:"添加监控项",visible:e.dialogFormVisible,width:e.mobileClient?"80%":"50%"},on:{"update:visible":function(t){e.dialogFormVisible=t}},model:{value:e.dialogFormVisible,callback:function(t){e.dialogFormVisible=t},expression:"dialogFormVisible"}},[r("el-form",{attrs:{model:e.form}},[r("el-form-item",{attrs:{label:"名称"}},[r("el-popover",{attrs:{placement:"right",title:"提示",width:"200",trigger:"hover"}},[e._v("若存在相同名称，会覆盖已有值\n                    "),r("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})]),r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.tag,callback:function(t){e.$set(e.form,"tag",t)},expression:"form.tag"}})],1),r("el-form-item",{attrs:{label:"关键字"}},[r("el-popover",{attrs:{placement:"right",title:"提示",width:"200",trigger:"hover"}},[e._v("熟悉\n                    "),r("a",{attrs:{referrerpolicy:"no-referrer",href:"https://github.com/search/advanced",target:"_blank"}},[e._v("GitHub 搜索语法")]),e._v("可以提高监控效率: OR/AND/NOT\n                    "),r("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})]),r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.keyword,callback:function(t){e.$set(e.form,"keyword",t)},expression:"form.keyword"}})],1),r("el-form-item",{attrs:{label:"开启/关闭"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.form.enabled,callback:function(t){e.$set(e.form,"enabled",t)},expression:"form.enabled"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{round:"",size:"mini"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{round:"",size:"mini",type:"primary"},on:{click:function(t){return e.handleAddQuery(e.form)}}},[e._v("确 定")])],1)],1),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("\n        添加\n    ")]),r("el-table",{attrs:{data:e.rules,stripe:!0}},[r("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("router-link",{attrs:{to:"/?tag="+t.row.tag}},[e._v("\n                    "+e._s(t.row.tag)+"\n                ")])]}}])}),r("el-table-column",{attrs:{label:"关键字","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("a",{attrs:{rel:"noopener noreferrer",href:"https://github.com/search?o=desc&q="+t.row.keyword+"&ref=searchresults&s=indexed&type=Code&utf8=%E2%9C%93",target:"_blank"}},[e._v(e._s(t.row.keyword))])]}}])}),r("el-table-column",{attrs:{label:"最后抓取时间",prop:"last",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.last?r("span",[e._v(e._s(e._f("timeAgo")(1e3*t.row.last)))]):e._e()]}}])}),r("el-table-column",{attrs:{label:"总数",width:"200",prop:"api_total",sortable:""}}),r("el-table-column",{attrs:{label:"已抓取",width:"200",prop:"found_total",sortable:""}}),r("el-table-column",{attrs:{label:"状态",width:"100",prop:"enabled",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(r){return e.updateEnabled(t.row)}},model:{value:t.row.enabled,callback:function(r){e.$set(t.row,"enabled",r)},expression:"scope.row.enabled"}})]}}])}),r("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button-group",[r("el-button",{attrs:{size:"mini",plain:"",round:""},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n                    ")]),r("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(r){return e.handleDeleteQuery(t.$index,t.row)}}},[e._v("删除\n                    ")]),0===t.row.status?r("el-button",{attrs:{size:"mini",plain:"",round:"",type:"primary",icon:"el-icon-loading"},on:{click:function(r){return e.handleSpiderResult(t.row)}}}):e._e(),1===t.row.status?r("el-button",{attrs:{size:"mini",type:"success",plain:"",round:"",icon:"el-icon-success"},on:{click:function(r){return e.handleSpiderResult(t.row)}}}):e._e(),-1===t.row.status?r("el-button",{attrs:{size:"mini",type:"warning",plain:"",round:"",icon:"el-icon-warning"},on:{click:function(r){return e.handleSpiderResult(t.row)}}}):e._e()],1)]}}])})],1)],1)},o=[],i=(r("0857"),r("5aa0")),a={data:function(){return{rules:[],dialogFormVisible:!1,form:{tag:"",keyword:"",enabled:!0}}},computed:{mobileClient:function(){return document.documentElement.clientWidth<document.documentElement.clientHeight}},methods:{handleEdit:function(e,t){this.form=t,this.dialogFormVisible=!0},fetchQuery:function(){var e=this;this.axios.get(this.api.settingQuery).then(function(t){e.rules=t.data.result}).catch(function(t){e.$message.error(t.toString())})},handleSpiderResult:function(e){var t=Object(i["format"])(1e3*e.last,"zh_CN");e.status>-1?this.$message.success(t+e.reason):this.$message.warning(t+e.reason)},handleDeleteQuery:function(e,t){var r=this;this.axios.delete("".concat(this.api.settingQuery,"?_id=").concat(t._id,"&tag=").concat(t.tag)).then(function(e){r.$message.success(e.data.msg),r.dialogFormVisible=!1,r.rules=e.data.result}).catch(function(e){r.$message.error(e.toString()),r.dialogFormVisible=!1})},updateEnabled:function(e){var t=this,r={tag:e.tag,keyword:e.keyword,enabled:e.enabled};this.axios.post(this.api.settingQuery,r).then(function(e){t.$message.success(e.data.msg),t.dialogFormVisible=!1,t.rules=e.data.result}).catch(function(e){t.$message.error(e.toString()),t.dialogFormVisible=!1})},handleAddQuery:function(e){var t=this;this.axios.post(this.api.settingQuery,e).then(function(e){t.$message.success(e.data.msg),t.dialogFormVisible=!1,t.rules=e.data.result,t.form={tag:"",keyword:"",enabled:!0}}).catch(function(e){t.$message.error(e.toString()),t.dialogFormVisible=!1})}},mounted:function(){this.fetchQuery()}},l=a,s=r("17cc"),c=Object(s["a"])(l,n,o,!1,null,null,null);t["default"]=c.exports},f7f7:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTimerId=t.saveTimerId=t.getDateAttribute=void 0;var n="timeago-tid",o="datetime",i=function(e,t){return e.getAttribute?e.getAttribute(t):e.attr?e.attr(t):void 0},a=function(e){return i(e,o)};t.getDateAttribute=a;var l=function(e,t){return e.setAttribute?e.setAttribute(n,t):e.attr?e.attr(n,t):void 0};t.saveTimerId=l;var s=function(e){return i(e,n)};t.getTimerId=s}}]);